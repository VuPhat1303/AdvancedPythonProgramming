if (self.CavalryLogger) { CavalryLogger.start_js(["8\/6goPr"]); }

__d("useCometUploadFile",["Actor","ActorURIConfig","AsyncUploadRequest","emptyFunction","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useMemo,j=b.useState;function a(a){var b=a.onError,e=b===void 0?c("emptyFunction"):b;b=a.onSuccess;var f=b===void 0?c("emptyFunction"):b,g=a.uri;b=d("Actor").useActor();var k=b[0];a=j(new Map());var l=a[0],m=a[1],n=h(function(a,b){return m(new Map(l.set(a,b)))},[l]),o=h(function(a){var b=new(c("AsyncUploadRequest"))(g).setAllowCrossOrigin(!0).setCustomHttpHeader(c("ActorURIConfig").PARAMETER_ACTOR,k).setPreventDefaultErrorHandler(!0).setFiles({file:a});function d(){b.abort()}b.subscribe("start",function(){return n(a,{abort:d,progress:0,state:"UPLOADING"})});b.subscribe("success",function(b,d){b=d.getResponse();if(!b){c("recoverableViolation")("Upload result should contain a response.","comet_ui");n(a,{error:{description:null,summary:null},state:"ERROR"});return}d=b.getPayload();n(a,{result:d,state:"SUCCESS"});f(d)});b.subscribe("failure",function(b,c){c=(b=c.getResponse())!=null?b:{};b=c.errorDescription;c=c.errorSummary;b={description:b==null?void 0:b.toString(),summary:c==null?void 0:c.toString()};n(a,{error:b,state:"ERROR"});e(b)});b.subscribe("progress",function(b,c){b=c.getProgressEvent();if(!b)return;n(a,{abort:d,progress:b.loaded/b.total,state:"UPLOADING"})});b.send()},[k,e,f,n,g]);return i(function(){return{start:o,uploads:l}},[o,l])}g["default"]=a}),98);
__d("ProfileCometImagePreloader",["Promise","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return new(b("Promise"))(function(b){var c=new Image();c.onload=b;c.onerror=b;c.src=a})}function a(a,d){c("promiseDone")(b("Promise").all(a.map(function(a){return h(a)})),d)}g.preloadImages=a}),98);
__d("ProfileCometCoverPhotoUploader.react",["fbt","ProfileCometCoverPhotoEditContext","ProfileCometImagePreloader","react","useCometAlertDialog","useCometUploadFile"],(function(a,b,c,d,e,f,g,h){"use strict";b=d("react");var i=b.useCallback,j=b.useContext,k=b.useEffect;function a(a){a=a.uri;var b=j(c("ProfileCometCoverPhotoEditContext")),e=b.dispatch;b=b.state;var f=b.coverPhoto,g=b.file;b=c("useCometAlertDialog")();var l=b[0];b=i(function(a){var b=a.blurredURI,c=b===void 0?"":b,f=a.fbid;b=a.imageHeight;var g=b===void 0?0:b;b=a.imageURI;var h=b===void 0?"":b;b=a.imageWidth;var i=b===void 0?0:b;d("ProfileCometImagePreloader").preloadImages([h,c],function(){return e({data:{blurredURI:c,height:g,id:f,uri:h,width:i},type:"UPLOAD_SUCCESS"})})},[e]);var m=i(function(a){var b=a.description;a=a.summary;l({body:b,title:(b=a)!=null?b:h._(/*FBT_CALL*/"L\u1ed7i"/*FBT_CALL*/)});e({type:"UPLOAD_FAILED"})},[e,l]);m=c("useCometUploadFile")({onError:m,onSuccess:b,uri:a});var n=m.start;b=m.uploads;var o=g?b.get(g):null;k(function(){if(!g||o)return;n(g)},[f,g,n,o]);return null}g["default"]=a}),98);
__d("XCometGroupsCoverPhotoUploaderAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groups/cover/comet_upload/",{group_id:{type:"FBID",required:!0}})}),null);
__d("GroupsCometCoverPhotoUploader.react",["ProfileCometCoverPhotoUploader.react","XCometGroupsCoverPhotoUploaderAsyncController","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){a=a.groupID;a=c("XCometGroupsCoverPhotoUploaderAsyncController").getURIBuilder().setFBID("group_id",a).getURI();return h.jsx(c("ProfileCometCoverPhotoUploader.react"),{uri:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);